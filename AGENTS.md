# AGENTS.md

Purpose: guide consistent, privacy-safe edits to the Vionix website.
This is a static site. Keep changes simple, durable, and template-aligned.

Scope:
- Governs site structure, presentation, and integration of Markdown-sourced content.
- Case studies are generated by a separate system with independent instructions.
  Do not restructure or “improve” their narrative unless explicitly instructed.
- Shared shell concerns remain in scope across all pages, including case studies:
  header/nav/footer consistency, shared CSS/JS wiring, and accessibility bug fixes.
- Narrative constraints on case studies do not relax technical wiring invariants.
  All generated pages must satisfy global runtime and accessibility contracts.
- Source of truth is Eleventy source files under `src/`; generated site output is `dist/`.
- Do not hand-edit generated files in `dist/`.

---

## 1) Non-negotiables (Project invariants)

### Privacy
- Do not publish real client names or identifying details.
- Avoid “fingerprints” (unique counts, niche combinations) that enable inference.
- Prefer ranges/abstractions over precise numbers when needed.
- Treat client-identifying details in Markdown sources as potentially internal/private; do not publish.

### Accuracy / No invention
- Do not fabricate claims, metrics, clients, timelines, or credentials.
- If a critical detail is missing, add: `<!-- MISSING: ... -->` rather than guessing.
- When behavior regresses, fix the deterministic source of truth (template/data/config)
  before adding runtime mitigation.

### Consistency
- Keep terminology and taxonomy consistent across pages (headings, CTAs, footer lists, filters).
- Avoid parallel/alternative names for the same thing.

---

## 2) Template & stack (implementation rules)

- Use Bootstrap, Bootstrap Icons, and the BizLand template assets/styles.
- Preserve the template’s layout, responsiveness, and animations.
- Optional enhancement layers (animation/interaction polish) must never gate critical
  content visibility, navigation, or baseline readability.
- Keep everything compatible with static hosting.
- Use Eleventy + Nunjucks for build-time generation (`src/` -> `dist/`).
- Vite is not part of the Vionix site workflow.
- Reuse existing template pages/patterns; build-time HTML partials/layouts are required for shared shell components.
- Keep generated output fully static; do not rely on runtime server-side includes or client-side HTML assembly for core layout.
- CSS/JS modularization is allowed when it reduces coupling and preserves template behavior.
- If CSS/JS is split, keep a clear ownership boundary (shared vs page-specific) and avoid duplicate logic.
- JavaScript only (no frameworks, no TypeScript).

Source layout contract:
- `src/pages`: page templates and page-level data files (`*.11tydata.json`)
- `src/layouts`: page layouts
- `src/partials`: shared shell components (`head`, `header`, `footer`, `scripts`)
- `src/data`: locale/content data
- `src/i18n`: locale registry/config
- `dist`: generated publish output (read-only for manual edits)

---

## 3) Structural requirements

- Maintain key components: header, footer, contact form, CTA sections.
- Navigation and menu links must match the actual site structure.
- If business-critical data is missing, request it or use `<!-- MISSING: ... -->`.
- Business-critical means at least: canonical service pillar names, CTA target/destination,
  contact channel details, legal/privacy claims, and proof metrics used for claims.

Accessibility and interaction invariants:
- Desktop nav dropdowns must support keyboard access (`:focus-within`) and must not rely on mobile click-toggle state.
- Mobile nav dropdowns may use click/tap toggle state.
- Icon-only interactive links must include an `aria-label`.
- Decorative images must use empty `alt` and `aria-hidden="true"` when appropriate.
- Respect `prefers-reduced-motion` for transitions/animations.

---

## 4) Markdown integration

- Business content comes from Markdown sources (plans, competency profiles, resumes, testimonials, etc.).
- Manually rewrite Markdown into high-quality, semantic HTML that fits the BizLand template.
- Do not build tooling to auto-convert Markdown.
- If a Markdown source contains client-identifying details (e.g., a real company name), derive an anonymized public label in HTML only if Caesar provides it; otherwise use `<!-- MISSING: ... -->`.
- For potentially identifying quantities/timelines, prefer ranges unless Caesar explicitly approves exact public values.

---

## 5) Taxonomy invariants (must be used verbatim)

Canonical service pillar IDs (must be stable across locales):
- `database_reporting_performance`
- `legacy_core_stabilisation`
- `incremental_system_modernisation`
- `efficient_team_workflow_enablement`

Display labels may be localized (`en`/`de`/`th`) but must map 1:1 to canonical IDs.
Do not introduce additional IDs or split/merge pillar semantics without explicit approval.

Icon mapping:
- `database_reporting_performance` -> `bi-code-square`
- `legacy_core_stabilisation` -> `bi-arrow-repeat`
- `incremental_system_modernisation` -> `bi-robot`
- `efficient_team_workflow_enablement` -> `bi-mortarboard`

Localization publication gate:
- Localized pages (`de`, `th`) require explicit approval metadata in `src/i18n/approval.json`.
- `approved` entries must include reviewer identity and approval date.
- Build/publish must fail if a localized page lacks required approval status.

---

## 6) “When in doubt” rule
Prefer:
- fewer changes,
- factual wording,
- template consistency,
- privacy safety,
- and leaving unknowns as `<!-- MISSING: ... -->`.

---

## 7) Page contracts (authoritative)

Site-wide wiring (all pages):
- Any page that includes `assets/js/main.js` must include `assets/js/nav.js` before it.
- Shared pages should load `assets/css/main.css` as the global style foundation.
- Apply these contracts via `src/layouts/base.njk` and `src/partials/*`, not by duplicating markup in each page.

Homepage-only wiring:
- The generated homepage output (`dist/index.html`) must include:
  - `assets/css/main.css`
  - `assets/css/homepage.css`
  - `assets/js/nav.js` loaded before `assets/js/main.js`

Navigation behavior (site-wide):
- Desktop (`min-width: 1200px`):
  - Submenus open on `:hover` or `:focus-within`.
  - Chevron toggle buttons are decorative only and must not persist menu state.
- Mobile (`max-width: 1199px`):
  - Chevron buttons toggle submenu visibility via `dropdown-active`.
  - Mobile menu button toggles `mobile-nav-active` and updates `aria-expanded`.

Accessibility (site-wide):
- Interactive icon-only links must have `aria-label`.
- Decorative testimonial images must use empty `alt` and `aria-hidden="true"`.
- Global `:focus-visible` styles and `prefers-reduced-motion` overrides must remain in CSS.

CSS ownership:
- `main.css`: shared/global styles used across pages.
- `homepage.css`: homepage-only layout and components (proof slider and engagement/fit card density tuning).

Change policy:
- Do not reintroduce inline `<style>` blocks.
- Do not reintroduce root-level hand-maintained `*.html` sources; edit templates in `src/pages` instead.
- Treat page-level overrides that reduce inherited assets/config as high-risk changes.
  Any such override requires explicit justification in the commit message.
